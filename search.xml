<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>华为路由器开启SSH</title>
    <url>/%E8%B7%AF%E7%94%B1%E4%B8%8E%E4%BA%A4%E6%8D%A2%E6%9C%BA%E6%8A%80%E6%9C%AF/2020/%E5%8D%8E%E4%B8%BA%E8%B7%AF%E7%94%B1%E5%99%A8%E5%BC%80%E5%90%AFSSH/</url>
    <content><![CDATA[<h2 id="华为路由器开启SSH"><a href="#华为路由器开启SSH" class="headerlink" title="华为路由器开启SSH"></a>华为路由器开启SSH</h2><p>SSH 为 Secure Shell 的缩写，由 IETF 的网络小组（Network Working Group）所制定；SSH 为建立在应用层基础上的安全协议。SSH 是较可靠，专为远程登录会话和其他网络服务提供安全性的协议。利用 SSH 协议可以有效防止远程管理过程中的信息泄露问题。SSH最初是UNIX系统上的一个程序，后来又迅速扩展到其他操作平台。SSH在正确使用时可弥补网络中的漏洞。SSH客户端适用于多种平台。几乎所有UNIX平台—包括HP-UX、Linux、AIX、Solaris、Digital UNIX、Irix，以及其他平台，都可运行SSH。</p>
<a id="more"></a>

<ol>
<li>网络拓扑<br><img src="/img/20200405004118572/20200405124926670.png" alt=""></li>
<li>AR1配置<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">进入系统视图</span><br><span class="line">&lt;Huawei&gt;system-view</span><br><span class="line">Enter system view, return user view with Ctrl+Z.</span><br><span class="line">更改名字</span><br><span class="line">[Huawei]sysname AR1</span><br><span class="line">进入g0&#x2F;0&#x2F;0接口</span><br><span class="line">[AR1]inter g0&#x2F;0&#x2F;0</span><br><span class="line">配置ip地址</span><br><span class="line">[AR1-GigabitEthernet0&#x2F;0&#x2F;0]ip address 1.1.1.1 30</span><br><span class="line">退出接口试图</span><br><span class="line">[AR1-GigabitEthernet0&#x2F;0&#x2F;0]quit</span><br><span class="line">[AR1]</span><br><span class="line">进入aaa模式</span><br><span class="line">[AR1]aaa</span><br><span class="line">[AR1-aaa]</span><br><span class="line">创建用户名cui和密码123456</span><br><span class="line">[AR1-aaa]local-user cui password cipher 123456</span><br><span class="line">Info: Add a new user.</span><br><span class="line">设置用户级别为15，最高等级</span><br><span class="line">[AR1-aaa]local-user cui privilege level 15</span><br><span class="line">设置允许该用户允许的服务ssh</span><br><span class="line">[AR1-aaa]local-user cui service-type ssh</span><br><span class="line">[AR1-aaa]quit</span><br><span class="line">进入vty通道</span><br><span class="line">[AR1]user-interface vty 0 4</span><br><span class="line">vty允许SSH登录</span><br><span class="line">[AR1-ui-vty0-4]protocol inbound ssh</span><br><span class="line">通道认证模式使用aaa模式</span><br><span class="line">[AR1-ui-vty0-4]authentication-mode aaa</span><br><span class="line">[AR1-ui-vty0-4]quit</span><br><span class="line">开启ssh服务</span><br><span class="line">[AR1]stelnet server enable</span><br><span class="line">Info: Succeeded in starting the STELNET server.</span><br></pre></td></tr></table></figure></li>
<li>AR2配置<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;Huawei&gt;system-view</span><br><span class="line">Enter system view, return user view with Ctrl+Z.</span><br><span class="line">[Huawei]sysname AR2</span><br><span class="line">[AR2]inter g0&#x2F;0&#x2F;0</span><br><span class="line">[AR2-GigabitEthernet0&#x2F;0&#x2F;0]</span><br><span class="line">[AR2-GigabitEthernet0&#x2F;0&#x2F;0]ip address 1.1.1.2 30</span><br><span class="line">[AR2-GigabitEthernet0&#x2F;0&#x2F;0]quit</span><br><span class="line">[AR2]</span><br><span class="line">[AR2]</span><br><span class="line">用ssh方式登录1.1.1.1</span><br><span class="line">[AR2]stelnet 1.1.1.1</span><br><span class="line">输入用户名cui</span><br><span class="line">Please input the username:cui</span><br><span class="line">Trying 1.1.1.1 ...</span><br><span class="line">Press CTRL+K to abort</span><br><span class="line">Connected to 1.1.1.1 ...</span><br><span class="line">提示服务器未通过身份验证，此处选择y，否则中断链接</span><br><span class="line">The server is not authenticated. Continue to access it? (y&#x2F;n)[n]:y</span><br><span class="line">Mar 29 2020 12:48:44-08:00 AR2 %%01SSH&#x2F;4&#x2F;CONTINUE_KEYEXCHANGE(l)[2]:The server h</span><br><span class="line">ad not been authenticated in the process of exchanging keys. When deciding wheth</span><br><span class="line">er to continue, the user chose Y. </span><br><span class="line">[AR2]</span><br><span class="line">是否保存公钥，此处选择Y，否则中断链接</span><br><span class="line">Save the server&#39;s public key? (y&#x2F;n)[n]:y</span><br><span class="line">The server&#39;s public key will be saved with the name 1.1.1.1. Please wait...</span><br><span class="line"></span><br><span class="line">Mar 29 2020 12:48:45-08:00 AR2 %%01SSH&#x2F;4&#x2F;SAVE_PUBLICKEY(l)[3]:When deciding whet</span><br><span class="line">her to save the server&#39;s public key 1.1.1.1, the user chose Y. </span><br><span class="line">[AR2]</span><br><span class="line">输入密码，输入密码的时候看不到，输入完毕后，登录AR1成功</span><br><span class="line">Enter password:</span><br><span class="line">路由器的名字已经变为AR1了</span><br><span class="line">&lt;AR1&gt;</span><br></pre></td></tr></table></figure></li>
<li>两台路由器均为保存配置，若要保存配置，请在用户视图中输入save，下图仅保存AR2路由器<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;AR2&gt;save </span><br><span class="line">  The current configuration will be written to the device. </span><br><span class="line">  Are you sure to continue? (y&#x2F;n)[n]:y</span><br><span class="line">  It will take several minutes to save configuration file, please wait.......</span><br><span class="line">  Configuration file had been saved successfully</span><br><span class="line">  Note: The configuration file will take effect after being activated</span><br><span class="line">&lt;AR2&gt;</span><br><span class="line">查看已保存配置</span><br><span class="line">&lt;AR2&gt;system-view </span><br><span class="line">Enter system view, return user view with Ctrl+Z.</span><br><span class="line">[AR2]dis saved-configuration </span><br><span class="line">&lt;显示信息已省略&gt;</span><br></pre></td></tr></table></figure>


</li>
</ol>
]]></content>
      <categories>
        <category>路由与交换机技术</category>
      </categories>
      <tags>
        <tag>R&amp;S</tag>
        <tag>Linux</tag>
      </tags>
  </entry>
</search>
